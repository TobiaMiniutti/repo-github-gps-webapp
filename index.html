<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Web GPS Sender</title>
  <style>
    body { font-family: sans-serif; padding: 2em; text-align: center; }
    button { padding: 1em; font-size: 1.2em; }
    .status { margin-top: 1em; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Invia la tua posizione</h1>
  <p>Premi il bottone per inviare la posizione al bot Telegram.</p>
  <button onclick="sendLocation()">ðŸ“¡ Invia posizione</button>
  <div class="status" id="status">In attesaâ€¦</div>

  <script>
    const ENDPOINT = "https://TUO_SERVER/ricevi_posizione"; // â† cambia con il tuo endpoint

    function sendLocation() {
      const status = document.getElementById("status");
      if (!navigator.geolocation) {
        status.textContent = "Geolocalizzazione non supportata.";
        return;
      }

      status.textContent = "Recupero posizioneâ€¦";

      navigator.geolocation.getCurrentPosition(
        (position) => {
          const lat = position.coords.latitude.toFixed(6);
          const lon = position.coords.longitude.toFixed(6);
          const data = {
            latitude: lat,
            longitude: lon,
            timestamp: new Date().toISOString()
          };

          fetch(ENDPOINT, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
          }).then((res) => {
            if (res.ok) {
              status.textContent = `Posizione inviata: ${lat}, ${lon}`;
            } else {
              status.textContent = "Errore durante l'invio.";
            }
          }).catch(() => {
            status.textContent = "Errore di rete.";
          });
        },
        (err) => {
          status.textContent = "Errore: " + err.message;
        }
      );
    }
  </script>
</body>
</html>